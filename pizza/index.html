<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Your Custom Pizza</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f8f8f8;
        }

        h1 {
            text-align: center;
            color: #333;
            margin: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        .section {
            margin-bottom: 20px;
        }

        .section h2 {
            margin-bottom: 10px;
            color: #4CAF50;
        }

        .ingredients {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 10px;
        }

        .ingredient {
            display: flex;
            align-items: center;
            background: #fff;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .ingredient:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .ingredient input[type="checkbox"] {
            margin-right: 10px;
            transform: scale(1.2);
        }

        #create-button {
            width: 100%;
            padding: 15px;
            background-color: #4CAF50;
            color: white;
            font-size: 18px;
            font-weight: bold;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 20px;
        }

        #create-button:hover {
            background-color: #45a049;
        }

        #result, #closest-match {
            margin-top: 20px;
            padding: 20px;
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        #pizza-container {
            position: relative;
            width: 300px;
            height: 300px;
            margin: 0 auto;
        }

        .ingredient-layer {
            position: absolute;
            top: 0;
            left: 0;
            transition: opacity 0.5s ease;
        }

        @media (max-width: 600px) {
            h1 {
                font-size: 1.5em;
            }

            #create-button {
                font-size: 16px;
                padding: 12px;
            }
        }
    </style>
</head>
<body>

<h1>Create Your Custom Pizza</h1>
<div class="container">
    <!-- Pizza visualization container -->
    <div id="pizza-container">
        <!-- Base pizza layer (crust) -->
        <svg viewBox="0 0 300 300" class="ingredient-layer" style="display: block;">
            <circle cx="150" cy="150" r="140" fill="#f4a460" stroke="#d2691e" stroke-width="5"></circle>
        </svg>

        <!-- Ingredient SVG layers -->
        <!-- Tomatensauce -->
        <svg viewBox="0 0 300 300" id="tomatensauce-layer" class="ingredient-layer" style="opacity: 0;">
            <circle cx="150" cy="150" r="120" fill="#e34234" opacity="0.8"></circle>
        </svg>

        <!-- Mozzarella fior di latte -->
        <svg viewBox="0 0 300 300" id="mozzarella-fior-di-latte-layer" class="ingredient-layer" style="opacity: 0;">
            <!-- First ring of mozzarella circles -->
            <circle cx="210" cy="150" r="15" fill="white" />
            <circle cx="180" cy="202" r="15" fill="white" />
            <circle cx="120" cy="202" r="15" fill="white" />
            <circle cx="90"  cy="150" r="15" fill="white" />
            <circle cx="120" cy="98"  r="15" fill="white" />
            <circle cx="180" cy="98"  r="15" fill="white" />

            <!-- Second ring of mozzarella circles -->
            <circle cx="236.6" cy="200" r="15" fill="white" />
            <circle cx="150"   cy="250" r="15" fill="white" />
            <circle cx="63.4"  cy="200" r="15" fill="white" />
            <circle cx="63.4"  cy="100" r="15" fill="white" />
            <circle cx="150"   cy="50"  r="15" fill="white" />
            <circle cx="236.6" cy="100" r="15" fill="white" />
        </svg>


        <!-- BÃ¼ffelmozzarella -->
        <svg viewBox="0 0 300 300" id="buffelmozzarella-layer" class="ingredient-layer" style="opacity: 0;">
            <!-- Evenly distribute mozzarella circles -->
            <circle cx="150" cy="90" r="15" fill="#f8f8f2" />
            <circle cx="200" cy="110" r="15" fill="#f8f8f2" />
            <circle cx="210" cy="160" r="15" fill="#f8f8f2" />
            <circle cx="180" cy="210" r="15" fill="#f8f8f2" />
            <circle cx="120" cy="210" r="15" fill="#f8f8f2" />
            <circle cx="90"  cy="160" r="15" fill="#f8f8f2" />
            <circle cx="100" cy="110" r="15" fill="#f8f8f2" />
        </svg>


        <!-- Gorgonzola -->
        <svg viewBox="0 0 300 300" id="gorgonzola-layer" class="ingredient-layer" style="opacity: 0;">
            <!-- Smaller chunks of gorgonzola -->
            <circle cx="130" cy="120" r="12" fill="#7f8c8d" opacity="0.7" />
            <circle cx="170" cy="130" r="12" fill="#7f8c8d" opacity="0.7" />
            <circle cx="140" cy="180" r="12" fill="#7f8c8d" opacity="0.7" />
            <circle cx="180" cy="170" r="12" fill="#7f8c8d" opacity="0.7" />
        </svg>


        <!-- Parmesan -->
        <svg viewBox="0 0 300 300" id="parmesan-layer" class="ingredient-layer" style="opacity: 0;">
            <!-- Grated parmesan scattered -->
            <polygon points="130,110 135,115 125,115" fill="#f1c40f" />
            <polygon points="170,130 175,135 165,135" fill="#f1c40f" />
            <polygon points="150,160 155,165 145,165" fill="#f1c40f" />
            <polygon points="120,180 125,185 115,185" fill="#f1c40f" />
            <polygon points="180,190 185,195 175,195" fill="#f1c40f" />
        </svg>


        <!-- Schinken -->
        <svg viewBox="0 0 300 300" id="schinken-layer" class="ingredient-layer" style="opacity: 0;">
            <!-- More ham slices -->
            <ellipse cx="110" cy="130" rx="25" ry="12" fill="#e9967a" />
            <ellipse cx="190" cy="120" rx="25" ry="12" fill="#e9967a" />
            <ellipse cx="150" cy="180" rx="25" ry="12" fill="#e9967a" />
            <ellipse cx="130" cy="210" rx="25" ry="12" fill="#e9967a" />
        </svg>


        <!-- Speck -->
        <svg viewBox="0 0 300 300" id="speck-layer" class="ingredient-layer" style="opacity: 0;">
            <!-- Additional bacon strips with rotation -->
            <rect x="110" y="100" width="50" height="10" fill="#cd853f" transform="rotate(15 135 105)" />
            <rect x="180" y="120" width="50" height="10" fill="#cd853f" transform="rotate(-10 205 125)" />
            <rect x="90" y="180" width="50" height="10" fill="#cd853f" transform="rotate(-15 115 185)" />
            <rect x="160" y="200" width="50" height="10" fill="#cd853f" transform="rotate(10 185 205)" />
        </svg>

        <!-- Tonno -->
        <svg viewBox="0 0 300 300" id="tonno-layer" class="ingredient-layer" style="opacity: 0;">
            <!-- More tuna chunks -->
            <polygon points="130,110 120,130 140,130" fill="#b0c4de" />
            <polygon points="170,140 160,160 180,160" fill="#b0c4de" />
            <polygon points="150,190 140,210 160,210" fill="#b0c4de" />
            <polygon points="110,170 100,190 120,190" fill="#b0c4de" />
        </svg>


        <!-- Scharfe Salami -->
        <svg viewBox="0 0 300 300" id="scharfe-salami-layer" class="ingredient-layer" style="opacity: 0;">
            <!-- Increased salami slices -->
            <circle cx="150" cy="80" r="12" fill="#a52a2a" />
            <circle cx="210" cy="110" r="12" fill="#a52a2a" />
            <circle cx="220" cy="170" r="12" fill="#a52a2a" />
            <circle cx="150" cy="220" r="12" fill="#a52a2a" />
            <circle cx="80" cy="170" r="12" fill="#a52a2a" />
            <circle cx="90" cy="110" r="12" fill="#a52a2a" />
        </svg>


        <!-- Mais -->
        <svg viewBox="0 0 300 300" id="mais-layer" class="ingredient-layer" style="opacity: 0;">
            <!-- Scattered corn kernels -->
            <circle cx="130" cy="120" r="4" fill="#ffd700" />
            <circle cx="170" cy="130" r="4" fill="#ffd700" />
            <circle cx="120" cy="160" r="4" fill="#ffd700" />
            <circle cx="180" cy="170" r="4" fill="#ffd700" />
            <circle cx="150" cy="190" r="4" fill="#ffd700" />
            <circle cx="160" cy="110" r="4" fill="#ffd700" />
            <circle cx="140" cy="140" r="4" fill="#ffd700" />
            <circle cx="150" cy="150" r="4" fill="#ffd700" />
        </svg>


        <!-- Artischocken -->
        <svg viewBox="0 0 300 300" id="artischocken-layer" class="ingredient-layer" style="opacity: 0;">
            <!-- More artichoke pieces -->
            <ellipse cx="130" cy="110" rx="20" ry="10" fill="#a2c523" />
            <ellipse cx="170" cy="130" rx="20" ry="10" fill="#a2c523" />
            <ellipse cx="140" cy="170" rx="20" ry="10" fill="#a2c523" />
            <ellipse cx="180" cy="190" rx="20" ry="10" fill="#a2c523" />
        </svg>


        <!-- Pilze -->
        <svg viewBox="0 0 300 300" id="pilze-layer" class="ingredient-layer" style="opacity: 0;">
            <!-- Multiple mushroom shapes -->
            <path d="M120 130 C125 120 135 120 140 130 L140 140 L120 140 Z" fill="#deb887" />
            <path d="M160 110 C165 100 175 100 180 110 L180 120 L160 120 Z" fill="#deb887" />
            <path d="M200 150 C205 140 215 140 220 150 L220 160 L200 160 Z" fill="#deb887" />
            <path d="M130 190 C135 180 145 180 150 190 L150 200 L130 200 Z" fill="#deb887" />
        </svg>


        <!-- Peperonata -->
        <svg viewBox="0 0 300 300" id="peperonata-layer" class="ingredient-layer" style="opacity: 0;">
            <!-- Additional pepper slices -->
            <ellipse cx="110" cy="110" rx="15" ry="25" fill="#ffcc00" transform="rotate(-20 110 110)" />
            <ellipse cx="190" cy="120" rx="15" ry="25" fill="#ffcc00" transform="rotate(15 190 120)" />
            <ellipse cx="140" cy="180" rx="15" ry="25" fill="#ffcc00" transform="rotate(-10 140 180)" />
            <ellipse cx="170" cy="200" rx="15" ry="25" fill="#ffcc00" transform="rotate(10 170 200)" />
        </svg>


        <!-- Spinat -->
        <svg viewBox="0 0 300 300" id="spinat-layer" class="ingredient-layer" style="opacity: 0;">
            <!-- Multiple spinach leaves -->
            <path d="M130 140 Q135 130 140 140 T150 140 Q145 150 140 140 T130 140" fill="#2E8B57" />
            <path d="M160 120 Q165 110 170 120 T180 120 Q175 130 170 120 T160 120" fill="#2E8B57" />
            <path d="M190 160 Q195 150 200 160 T210 160 Q205 170 200 160 T190 160" fill="#2E8B57" />
            <path d="M120 180 Q125 170 130 180 T140 180 Q135 190 130 180 T120 180" fill="#2E8B57" />
        </svg>


        <!-- Zwiebel -->
        <svg viewBox="0 0 300 300" id="zwiebel-layer" class="ingredient-layer" style="opacity: 0;">
            <!-- Onion rings -->
            <circle cx="150" cy="110" r="15" stroke="#d2b48c" stroke-width="3" fill="none" />
            <circle cx="200" cy="150" r="15" stroke="#d2b48c" stroke-width="3" fill="none" />
            <circle cx="100" cy="160" r="15" stroke="#d2b48c" stroke-width="3" fill="none" />
            <circle cx="150" cy="200" r="15" stroke="#d2b48c" stroke-width="3" fill="none" />
        </svg>


        <!-- Oliven -->
        <svg viewBox="0 0 300 300" id="oliven-layer" class="ingredient-layer" style="opacity: 0;">
            <!-- Additional olives -->
            <ellipse cx="110" cy="120" rx="8" ry="12" fill="#556b2f" />
            <ellipse cx="190" cy="130" rx="8" ry="12" fill="#556b2f" />
            <ellipse cx="130" cy="190" rx="8" ry="12" fill="#556b2f" />
            <ellipse cx="170" cy="210" rx="8" ry="12" fill="#556b2f" />
            <ellipse cx="150" cy="150" rx="8" ry="12" fill="#556b2f" />
        </svg>


        <!-- Taggiasca Oliven -->
        <svg viewBox="0 0 300 300" id="taggiasca-oliven-layer" class="ingredient-layer" style="opacity: 0;">
            <!-- More Taggiasca olives -->
            <circle cx="120" cy="110" r="7" fill="#6a5acd" />
            <circle cx="180" cy="120" r="7" fill="#6a5acd" />
            <circle cx="110" cy="180" r="7" fill="#6a5acd" />
            <circle cx="190" cy="170" r="7" fill="#6a5acd" />
            <circle cx="150" cy="200" r="7" fill="#6a5acd" />
        </svg>


        <!-- Riesen Kapern -->
        <svg viewBox="0 0 300 300" id="riesen-kapern-layer" class="ingredient-layer" style="opacity: 0;">
            <!-- Increased capers -->
            <ellipse cx="130" cy="120" rx="5" ry="10" fill="#6b8e23" />
            <ellipse cx="170" cy="130" rx="5" ry="10" fill="#6b8e23" />
            <ellipse cx="120" cy="170" rx="5" ry="10" fill="#6b8e23" />
            <ellipse cx="180" cy="180" rx="5" ry="10" fill="#6b8e23" />
            <ellipse cx="150" cy="150" rx="5" ry="10" fill="#6b8e23" />
        </svg>


        <!-- Lombardi -->
        <svg viewBox="0 0 300 300" id="lombardi-layer" class="ingredient-layer" style="opacity: 0;">
            <!-- More chili peppers -->
            <path d="M130 140 L140 120 L150 140 Z" fill="#ff4500" />
            <path d="M170 130 L180 110 L190 130 Z" fill="#ff4500" />
            <path d="M150 180 L160 160 L170 180 Z" fill="#ff4500" />
        </svg>


        <!-- Knoblauch -->
        <svg viewBox="0 0 300 300" id="knoblauch-layer" class="ingredient-layer" style="opacity: 0;">
            <!-- Additional garlic cloves -->
            <path d="M120 130 Q110 120 120 110 Q130 120 120 130" fill="#fffacd" />
            <path d="M180 140 Q170 130 180 120 Q190 130 180 140" fill="#fffacd" />
            <path d="M150 180 Q140 170 150 160 Q160 170 150 180" fill="#fffacd" />
        </svg>


        <!-- Basilikum -->
        <svg viewBox="0 0 300 300" id="basilikum-layer" class="ingredient-layer" style="opacity: 0;">
            <!-- More basil leaves -->
            <path d="M130 120 Q125 115 130 110 Q135 115 130 120" fill="#008000" />
            <path d="M170 110 Q165 105 170 100 Q175 105 170 110" fill="#008000" />
            <path d="M140 180 Q135 175 140 170 Q145 175 140 180" fill="#008000" />
            <path d="M180 190 Q175 185 180 180 Q185 185 180 190" fill="#008000" />
        </svg>

        <!-- Spiegelei -->
        <svg viewBox="0 0 300 300" id="spiegelei-layer" class="ingredient-layer" style="opacity: 0;">
            <!-- Two fried eggs -->
            <circle cx="120" cy="130" r="20" fill="white" />
            <circle cx="120" cy="130" r="10" fill="yellow" />
            <circle cx="180" cy="170" r="20" fill="white" />
            <circle cx="180" cy="170" r="10" fill="yellow" />
        </svg>


        <!-- Gekochtes Ei -->
        <svg viewBox="0 0 300 300" id="gekochtes-ei-layer" class="ingredient-layer" style="opacity: 0;">
            <!-- Slices of boiled egg -->
            <ellipse cx="130" cy="120" rx="15" ry="25" fill="#fff" />
            <circle cx="130" cy="120" r="8" fill="#FFD700" />
            <ellipse cx="170" cy="180" rx="15" ry="25" fill="#fff" />
            <circle cx="170" cy="180" r="8" fill="#FFD700" />
        </svg>

    </div>

    <!-- Sections for selecting ingredients -->
    <div id="ingredients-container"></div>

    <div id="result"></div>
    <div id="closest-match"></div>
</div>

<script>
    const pizzas = {
        "Pizza Marinara": ["Tomatensauce", "Knoblauch"],
        "Pizza Margherita": ["Tomatensauce", "Mozzarella fior di latte"],
        "Scharfe Salami": ["Tomatensauce", "Mozzarella fior di latte", "Scharfe Salami"],
        "Pizza Schinken": ["Tomatensauce", "Mozzarella fior di latte", "Schinken"],
        "Tunfisch Mais": ["Tomatensauce", "Mozzarella fior di latte", "Tonno", "Mais"],
        "Pizza Gorgonzola": ["Tomatensauce", "Mozzarella fior di latte", "Gorgonzola"],
        "Pizza Napoletana": ["Tomatensauce", "BÃ¼ffelmozzarella", "Parmesan", "Basilikum"],
        "Pizza Siciliana": ["Tomatensauce", "Mozzarella fior di latte", "Scharfe Salami", "Peperonata", "Knoblauch"],
        "Pizza 4 Stagioni": ["Tomatensauce", "Mozzarella fior di latte", "Schinken", "Pilze", "Artischocken", "Oliven"],

        "Pizza Diavolo": ["Tomatensauce", "Mozzarella fior di latte", "Scharfe Salami", "Oliven", "Lombardi", "Peperonata"],
        "Pizza Capricciosa": ["Tomatensauce", "Mozzarella fior di latte", "Schinken", "Pilze", "Artischocken"],
        "Pizza Calabrese": ["Tomatensauce", "BÃ¼ffelmozzarella", "Riesen Kapern", "Taggiasca Oliven", "Knoblauch", "Scharfe Salami"],
        "Pizza Mesico": ["Tomatensauce", "Mozzarella fior di latte", "Scharfe Salami", "Lombardi", "Mais", "Peperonata"],
        "Pizza Englisch": ["Tomatensauce", "Mozzarella fior di latte", "Speck", "Peperonata", "Zwiebel", "Spiegelei"],
        "Fire and Ice": ["Tomatensauce", "Mozzarella fior di latte", "Spinat", "Gekochtes Ei", "Scharfe Salami", "Knoblauch", "Zwiebel"]
    };

    const ingredientCategories = {
        "Choose Your Sauce": ["Tomatensauce"],
        "Choose Your Cheese": ["Mozzarella fior di latte", "BÃ¼ffelmozzarella", "Gorgonzola"],
        "Choose Your Proteins": ["Schinken", "Speck", "Tonno", "Scharfe Salami"],
        "Choose Your Vegetables": ["Mais", "Artischocken", "Pilze", "Peperonata", "Spinat", "Zwiebel", "Oliven", "Taggiasca Oliven", "Riesen Kapern", "Lombardi"],
        "Choose Your Other Toppings": ["Knoblauch", "Basilikum", "Parmesan", "Spiegelei", "Gekochtes Ei"]
    };

    function generateLayerId(ingredient) {
        return ingredient.toLowerCase()
            .normalize('NFD').replace(/[\u0300-\u036f]/g, '') // remove diacritics
            .replace(/ /g, '-') + '-layer';
    }

    function generateIngredientList() {
        const container = document.getElementById('ingredients-container');
        container.innerHTML = '';

        for (const [category, ingredients] of Object.entries(ingredientCategories)) {
            const section = document.createElement('div');
            section.classList.add('section');

            const heading = document.createElement('h2');
            heading.textContent = category;
            section.appendChild(heading);

            const ingredientsDiv = document.createElement('div');
            ingredientsDiv.classList.add('ingredients');

            ingredients.forEach(ingredient => {
                const label = document.createElement('label');
                label.classList.add('ingredient');

                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.value = ingredient;

                const layerId = generateLayerId(ingredient);

                checkbox.addEventListener('change', () => {
                    toggleIngredient(layerId, checkbox.checked);
                    updatePizza();  // Update pizza in real time
                });

                label.appendChild(checkbox);
                label.appendChild(document.createTextNode(ingredient));
                ingredientsDiv.appendChild(label);
            });

            section.appendChild(ingredientsDiv);
            container.appendChild(section);
        }
    }

    function toggleIngredient(layerId, isChecked) {
        const layer = document.getElementById(layerId);
        if (layer) {
            layer.style.opacity = isChecked ? '1' : '0';
        }
    }

    function updatePizza() {
        const selectedIngredients = Array.from(document.querySelectorAll('input[type="checkbox"]:checked')).map(cb => cb.value);
        const customName = generatePizzaName(selectedIngredients);
        document.getElementById("result").innerHTML = `<h2>${customName}</h2><p>${selectedIngredients.join(", ")}</p>`;
        findClosestPizza(selectedIngredients);
    }

    function generatePizzaName(ingredients) {
        const baseNames = {
            "Tomatensauce": "Inferno",
            "Mozzarella fior di latte": "Mozzarella",
            "BÃ¼ffelmozzarella": "Buffalo",
            "Scharfe Salami": "Spicy",
            "Speck": "Smoky",
            "Tonno": "Tuna",
            "Pilze": "Mushroom",
            "Spinat": "Spinach",
            "Gorgonzola": "Gorgonzola",
            "Parmesan": "Parmesan",
            "Schinken": "Ham",
            "Prosciutto Cotto": "Prosciutto",
            "Mais": "Corn",
            "Artischocken": "Artichoke",
            "Zwiebel": "Onion",
            "Oliven": "Olive",
            "Riesen Kapern": "Capers",
            "Lombardi": "Pepper"
        };

        let nameParts = ingredients.map(ingredient => baseNames[ingredient] || "Custom").sort();
        return nameParts.length > 0 ? nameParts.join(" ") + " Pizza" : "Custom Pizza";
    }

    function toggleIngredient(layerId, isChecked) {
        const layer = document.getElementById(layerId);
        if (layer) {
            layer.style.opacity = isChecked ? '1' : '0';
        }
    }

    function findClosestPizza(selectedIngredients) {
        let closestPizza = null;
        let maxMatches = 0;
        let additionalIngredients = [];
        let missingIngredients = [];

        for (const [pizza, ingredients] of Object.entries(pizzas)) {
            const matches = selectedIngredients.filter(ingredient => ingredients.includes(ingredient)).length;
            if (matches > maxMatches) {
                maxMatches = matches;
                closestPizza = pizza;
                additionalIngredients = ingredients.filter(ingredient => !selectedIngredients.includes(ingredient));
                missingIngredients = selectedIngredients.filter(ingredient => !ingredients.includes(ingredient));
            }
        }

        if (closestPizza) {
            document.getElementById("closest-match").innerHTML = `
                <h2>Closest Pizza: ${closestPizza}</h2>
                <p>Additional ingredients needed: ${missingIngredients.join(", ") || "None"}</p>
                <p>Ingredients to remove: ${additionalIngredients.join(", ") || "None"}</p>
            `;
        } else {
            document.getElementById("closest-match").innerHTML = "<p>No close matches found.</p>";
        }
    }

    document.addEventListener('DOMContentLoaded', generateIngredientList);
</script>

</body>
</html>
